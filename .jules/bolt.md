## 2025-05-22 - [Bottleneck in ActivityLog.getAnalytics]
**Learning:** The `ActivityLog.getAnalytics` method was using an O(n) approach where 'n' is the number of days, performing 3 queries per day inside a loop. This results in 21 database queries for a standard 7-day dashboard view, which is inefficient and doesn't scale well.
**Action:** Refactor `getAnalytics` to use SQL aggregate functions (`COUNT`, `SUM`) combined with `GROUP BY date(created_at)`. This reduces the complexity to a constant number of queries (2 queries: one for activities, one for credits) regardless of the number of days, significantly improving performance.
